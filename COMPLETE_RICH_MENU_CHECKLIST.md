# Rich Menu 完整檢查清單

## 🔍 為什麼 LINE 中還是看不到 Rich Menu？

即使已經設定為預設，Rich Menu 可能還是沒有顯示。以下是完整的檢查和解決步驟。

## ✅ 完整檢查清單

### 步驟 1：確認 Rich Menu 已創建

**檢查方法**：
1. 打開 `check-rich-menu.html`
2. 點擊「檢查 Rich Menu 列表」
3. **確認**：列表中至少有一個 Rich Menu

**如果沒有 Rich Menu**：
- 點擊「創建新的 Rich Menu」
- 記下返回的 Rich Menu ID

### 步驟 2：確認圖片已上傳（最重要！）

**這是關鍵步驟**：Rich Menu **必須先上傳圖片**才能設定為預設。

**檢查方法**：
1. 打開 `upload-rich-menu.html`
2. 輸入您的 Rich Menu ID
3. 選擇圖片並上傳
4. **確認**：顯示「上傳成功」

**如果上傳失敗**：
- 檢查錯誤訊息
- 確認 Rich Menu ID 是否正確
- 確認圖片是否符合規格（2500x1686，PNG/JPEG，< 1MB）

### 步驟 3：確認已設定為預設

**檢查方法**：
1. 在檢查工具中，找到您的 Rich Menu
2. 點擊「設為預設」按鈕
3. **確認**：顯示「設定成功」

**或使用上傳工具**：
1. 上傳成功後，點擊「設定為預設 Rich Menu」按鈕
2. **確認**：顯示「設定成功」

### 步驟 4：完全重新啟動 LINE

**重要**：只切換應用程式不會更新 Rich Menu。

**iOS**：
1. 雙擊 Home 鍵（或從底部向上滑動）
2. 向上滑動 LINE 應用程式，完全關閉
3. 等待 30 秒
4. 重新打開 LINE

**Android**：
1. 進入多工視窗（最近使用的應用程式）
2. 向上滑動 LINE 應用程式，完全關閉
3. 等待 30 秒
4. 重新打開 LINE

**或直接重啟手機**：
- 關機後重新開機

### 步驟 5：等待 LINE 更新

**時間延遲**：
- 設定為預設後，LINE 可能需要 **5-10 分鐘** 才會更新
- 請耐心等待

**建議**：
1. 設定為預設後，等待 5-10 分鐘
2. 然後完全關閉並重新打開 LINE
3. 再次檢查

### 步驟 6：確認 LINE 應用程式版本

**檢查方法**：
- 確認 LINE 已更新到最新版本
- 舊版本可能不支援某些 Rich Menu 功能

### 步驟 7：確認已加入好友

**重要**：Rich Menu 只會顯示給已加入好友的用戶。

**檢查方法**：
- 確認您已經加入 LINE Bot 為好友
- 如果沒有，請先加入好友

## 🎯 最常見的原因（按機率排序）

### 1. 圖片未上傳（60%）

**問題**：Rich Menu 沒有圖片，即使設定為預設也不會顯示。

**解決**：
1. 確認圖片已上傳
2. 如果沒有，立即上傳圖片
3. 上傳成功後，重新設定為預設

### 2. LINE 未完全重啟（25%）

**問題**：只切換應用程式，沒有完全關閉。

**解決**：
1. 完全關閉 LINE 應用程式
2. 等待 30 秒
3. 重新打開 LINE

### 3. 時間延遲（10%）

**問題**：設定為預設後，LINE 需要時間更新。

**解決**：
1. 等待 5-10 分鐘
2. 然後完全關閉並重新打開 LINE

### 4. 操作順序錯誤（5%）

**問題**：先設定為預設，再上傳圖片。

**解決**：
1. 先上傳圖片
2. 然後設定為預設

## 📋 完整操作流程（確保成功）

### 1. 創建 Rich Menu（如果還沒有）

```
打開 check-rich-menu.html
  ↓
點擊「檢查 Rich Menu 列表」
  ↓
如果沒有 Rich Menu，點擊「創建新的 Rich Menu」
  ↓
記下 Rich Menu ID
```

### 2. 上傳圖片（必須！）

```
打開 upload-rich-menu.html
  ↓
輸入 Rich Menu ID
  ↓
選擇圖片（2500x1686，PNG/JPEG，< 1MB）
  ↓
點擊「上傳圖片」
  ↓
確認顯示「上傳成功」
```

### 3. 設定為預設

```
在上傳工具中，點擊「設定為預設 Rich Menu」
  ↓
或
  ↓
在檢查工具中，點擊「設為預設」
  ↓
確認顯示「設定成功」
```

### 4. 等待並重啟

```
等待 5-10 分鐘
  ↓
完全關閉 LINE 應用程式
  ↓
等待 30 秒
  ↓
重新打開 LINE
  ↓
進入 LINE Bot 聊天視窗
  ↓
檢查 Rich Menu 是否顯示
```

## 🔧 如果還是沒有顯示

### 方法一：完整重置流程

1. **刪除現有的 Rich Menu**（使用檢查工具或 API）
2. **創建新的 Rich Menu**
3. **立即上傳圖片**（不要等待）
4. **立即設定為預設**（上傳成功後）
5. **等待 10 分鐘**
6. **完全關閉 LINE**
7. **重新打開 LINE**
8. **檢查 Rich Menu**

### 方法二：使用診斷工具

1. 打開 `diagnose-rich-menu.html`
2. 執行完整診斷
3. 根據診斷結果處理問題

### 方法三：檢查 API 狀態

在瀏覽器 Console 中執行：

```javascript
// 檢查 Rich Menu 列表
fetch('https://music-website-six-opal.vercel.app/api/admin/rich-menu')
  .then(res => res.json())
  .then(data => {
    console.log('Rich Menu 列表:', data)
    if (data.success) {
      console.log('找到的 Rich Menu:')
      data.richMenus.forEach((rm, index) => {
        console.log(`${index + 1}. ID: ${rm.richMenuId}`)
        console.log(`   名稱: ${rm.name || '未命名'}`)
      })
    }
  })
```

## 💡 重要提示

1. **圖片必須先上傳**：這是 LINE API 的要求
2. **必須完全關閉 LINE**：不是只切換應用程式
3. **需要等待時間**：設定為預設後，LINE 需要 5-10 分鐘更新
4. **確認操作順序**：創建 → 上傳圖片 → 設定為預設

## 📞 如果所有方法都試過了還是沒有

請提供以下資訊：

1. **Rich Menu 列表**：使用檢查工具查看，截圖或告訴我有幾個 Rich Menu
2. **上傳狀態**：是否成功上傳圖片？
3. **設定狀態**：是否成功設定為預設？
4. **LINE 版本**：LINE 應用程式版本
5. **設備類型**：iOS 或 Android

這樣我可以更準確地診斷問題。

