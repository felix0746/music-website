<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rich Menu åœ–ç‰‡ç”Ÿæˆå™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background: #f3f4f6;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #1e40af;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #64748b;
            margin-bottom: 30px;
        }

        .controls {
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .control-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            color: #1e40af;
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 14px;
        }

        input[type="color"],
        input[type="text"] {
            padding: 8px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 14px;
        }

        input[type="color"] {
            width: 80px;
            height: 40px;
            cursor: pointer;
        }

        button {
            background: #2563eb;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-right: 10px;
            margin-top: 10px;
            transition: all 0.3s;
        }

        button:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        .preview-container {
            display: flex;
            justify-content: center;
            align-items: center;
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            overflow: auto;
        }

        #richMenuCanvas {
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .info-box {
            background: #eff6ff;
            border-left: 4px solid #2563eb;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .info-box h3 {
            color: #1e40af;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .info-box p {
            color: #475569;
            font-size: 13px;
            line-height: 1.6;
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }

        .result.success {
            background: #d1fae5;
            border: 2px solid #10b981;
            color: #065f46;
            display: block;
        }

        .download-link {
            display: inline-block;
            margin-top: 10px;
            padding: 10px 20px;
            background: #10b981;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
        }

        .download-link:hover {
            background: #059669;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ Rich Menu åœ–ç‰‡ç”Ÿæˆå™¨</h1>
        <p class="subtitle">ç”Ÿæˆç¬¦åˆ LINE è¦æ ¼çš„ Rich Menu åœ–ç‰‡ï¼ˆ2500 x 1686 åƒç´ ï¼‰</p>

        <div class="info-box">
            <h3>ğŸ“‹ ä½¿ç”¨èªªæ˜</h3>
            <p>
                1. èª¿æ•´é¡è‰²è¨­å®šï¼ˆå¯é¸ï¼‰<br>
                2. é»æ“Šã€Œç”Ÿæˆåœ–ç‰‡ã€<br>
                3. é»æ“Šã€Œä¸‹è¼‰åœ–ç‰‡ã€<br>
                4. ä½¿ç”¨ä¸Šå‚³å·¥å…·ä¸Šå‚³åˆ° LINE
            </p>
        </div>

        <div class="controls">
            <div class="control-group">
                <label>èƒŒæ™¯é¡è‰²ï¼š</label>
                <input type="color" id="bgColor" value="#ffffff">
            </div>
            <div class="control-group">
                <label>æŒ‰éˆ•èƒŒæ™¯é¡è‰²ï¼š</label>
                <input type="color" id="buttonBgColor" value="#f8fafc">
            </div>
            <div class="control-group">
                <label>æ–‡å­—é¡è‰²ï¼š</label>
                <input type="color" id="textColor" value="#1e40af">
            </div>
            <div class="control-group">
                <label>é‚Šæ¡†é¡è‰²ï¼š</label>
                <input type="color" id="borderColor" value="#e2e8f0">
            </div>
            <button onclick="generateImage()">ç”Ÿæˆåœ–ç‰‡</button>
            <button onclick="downloadImage()" id="downloadBtn" style="display: none;">ä¸‹è¼‰åœ–ç‰‡</button>
        </div>

        <div class="preview-container">
            <canvas id="richMenuCanvas" width="2500" height="1686"></canvas>
        </div>

        <div id="result"></div>
    </div>

    <script>
        const canvas = document.getElementById('richMenuCanvas');
        const ctx = canvas.getContext('2d');
        let imageDataUrl = null;

        // æŒ‰éˆ•é…ç½®
        const buttons = [
            { text: 'èª²ç¨‹ä»‹ç´¹', x: 0, y: 0, width: 833, height: 843, icon: 'ğŸµ' },
            { text: 'æˆ‘çš„å ±å', x: 833, y: 0, width: 834, height: 843, icon: 'ğŸ“‹' },
            { text: 'ä»˜æ¬¾è³‡è¨Š', x: 1667, y: 0, width: 833, height: 843, icon: 'ğŸ’³' },
            { text: 'ä»˜æ¬¾å›å ±', x: 0, y: 843, width: 833, height: 843, icon: 'âœ…' },
            { text: 'å–æ¶ˆ/é€€è²»', x: 833, y: 843, width: 834, height: 843, icon: 'âŒ' },
            { text: 'è¯çµ¡è€å¸«', x: 1667, y: 843, width: 833, height: 843, icon: 'ğŸ’¬' }
        ];

        function generateImage() {
            const bgColor = document.getElementById('bgColor').value;
            const buttonBgColor = document.getElementById('buttonBgColor').value;
            const textColor = document.getElementById('textColor').value;
            const borderColor = document.getElementById('borderColor').value;

            // ç¹ªè£½èƒŒæ™¯
            ctx.fillStyle = bgColor;
            ctx.fillRect(0, 0, 2500, 1686);

            // ç¹ªè£½æ¯å€‹æŒ‰éˆ•
            buttons.forEach((button, index) => {
                // æŒ‰éˆ•èƒŒæ™¯
                ctx.fillStyle = buttonBgColor;
                ctx.fillRect(button.x, button.y, button.width, button.height);

                // é‚Šæ¡†
                ctx.strokeStyle = borderColor;
                ctx.lineWidth = 4;
                ctx.strokeRect(button.x, button.y, button.width, button.height);

                // åœ–ç¤º
                ctx.font = 'bold 120px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillStyle = textColor;
                ctx.fillText(button.icon, button.x + button.width / 2, button.y + button.height / 2 - 60);

                // æ–‡å­—
                ctx.font = 'bold 56px "Microsoft JhengHei", Arial, sans-serif';
                ctx.fillText(button.text, button.x + button.width / 2, button.y + button.height / 2 + 60);
            });

            // è½‰æ›ç‚ºåœ–ç‰‡
            imageDataUrl = canvas.toDataURL('image/png');
            document.getElementById('downloadBtn').style.display = 'inline-block';

            const resultDiv = document.getElementById('result');
            resultDiv.className = 'result success';
            resultDiv.innerHTML = 'âœ… åœ–ç‰‡ç”ŸæˆæˆåŠŸï¼é»æ“Šã€Œä¸‹è¼‰åœ–ç‰‡ã€æŒ‰éˆ•ä¸‹è¼‰ã€‚';
        }

        function downloadImage() {
            if (!imageDataUrl) {
                alert('è«‹å…ˆç”Ÿæˆåœ–ç‰‡');
                return;
            }

            // å°‡ base64 è½‰æ›ç‚º Blob
            const byteString = atob(imageDataUrl.split(',')[1]);
            const mimeString = imageDataUrl.split(',')[0].split(':')[1].split(';')[0];
            const ab = new ArrayBuffer(byteString.length);
            const ia = new Uint8Array(ab);
            for (let i = 0; i < byteString.length; i++) {
                ia[i] = byteString.charCodeAt(i);
            }
            const blob = new Blob([ab], { type: mimeString });

            // å‰µå»ºä¸‹è¼‰é€£çµ
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'rich-menu.png';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            // é¡¯ç¤ºä¸Šå‚³æç¤º
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `
                âœ… åœ–ç‰‡å·²ä¸‹è¼‰ï¼<br>
                <a href="upload-rich-menu.html" class="download-link" style="margin-top: 10px; display: inline-block;">
                    ç¾åœ¨ä¸Šå‚³åˆ° LINE
                </a>
            `;
        }

        // è‡ªå‹•ç”Ÿæˆåˆå§‹åœ–ç‰‡
        window.addEventListener('load', () => {
            generateImage();
        });
    </script>
</body>
</html>

